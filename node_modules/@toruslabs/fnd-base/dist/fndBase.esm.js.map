{"version":3,"file":"fndBase.esm.js","sources":["../src/endpoints.ts","../src/pubKeys.ts","../src/sapphireNetworkConfig.ts","../src/utils.ts"],"sourcesContent":["import { LEGACY_NETWORKS_ROUTE_MAP, TORUS_LEGACY_NETWORK_TYPE, TORUS_SAPPHIRE_NETWORK, TORUS_SAPPHIRE_NETWORK_TYPE } from \"@toruslabs/constants\";\n\nexport const SAPPHIRE_NETWORK_URLS: Record<TORUS_SAPPHIRE_NETWORK_TYPE, string[]> = {\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET]: [\n    \"https://node-1.dev-node.web3auth.io\",\n    \"https://node-2.dev-node.web3auth.io\",\n    \"https://node-3.dev-node.web3auth.io\",\n    \"https://node-4.dev-node.web3auth.io\",\n    \"https://node-5.dev-node.web3auth.io\",\n  ],\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET]: [\n    \"https://node-1.node.web3auth.io\",\n    \"https://node-2.node.web3auth.io\",\n    \"https://node-3.node.web3auth.io\",\n    \"https://node-4.node.web3auth.io\",\n    \"https://node-5.node.web3auth.io\",\n  ],\n};\n\nexport const getSSSEndpoints = (sapphireNetwork: TORUS_SAPPHIRE_NETWORK_TYPE, legacyNetwork?: TORUS_LEGACY_NETWORK_TYPE) => {\n  const endpoints = SAPPHIRE_NETWORK_URLS[sapphireNetwork];\n  if (!endpoints || endpoints.length === 0) {\n    throw new Error(`Unsupported network: ${sapphireNetwork}`);\n  }\n  const routeIdentifier = LEGACY_NETWORKS_ROUTE_MAP[legacyNetwork as TORUS_LEGACY_NETWORK_TYPE];\n  return endpoints.map((e) => {\n    if (routeIdentifier && routeIdentifier.networkIdentifier) {\n      return `${e}/sss/${routeIdentifier.networkIdentifier}/jrpc`;\n    }\n    return `${e}/sss/jrpc`;\n  });\n};\n\nexport const getRSSEndpoints = (sapphireNetwork: TORUS_SAPPHIRE_NETWORK_TYPE, legacyNetwork?: TORUS_LEGACY_NETWORK_TYPE) => {\n  const endpoints = SAPPHIRE_NETWORK_URLS[sapphireNetwork];\n  if (!endpoints || endpoints.length === 0) {\n    throw new Error(`Unsupported network: ${sapphireNetwork}`);\n  }\n\n  const routeIdentifier = LEGACY_NETWORKS_ROUTE_MAP[legacyNetwork as TORUS_LEGACY_NETWORK_TYPE];\n  return endpoints.map((e) => {\n    if (routeIdentifier && routeIdentifier.networkIdentifier) {\n      return `${e}/rss/${routeIdentifier.networkIdentifier}`;\n    }\n    return `${e}/rss`;\n  });\n};\n\nexport const getTSSEndpoints = (sapphireNetwork: TORUS_SAPPHIRE_NETWORK_TYPE, legacyNetwork?: TORUS_LEGACY_NETWORK_TYPE) => {\n  const endpoints = SAPPHIRE_NETWORK_URLS[sapphireNetwork];\n  if (!endpoints || endpoints.length === 0) {\n    throw new Error(`Unsupported network: ${sapphireNetwork}`);\n  }\n\n  const routeIdentifier = LEGACY_NETWORKS_ROUTE_MAP[legacyNetwork as TORUS_LEGACY_NETWORK_TYPE];\n  return endpoints.map((e) => {\n    if (routeIdentifier && routeIdentifier.networkIdentifier) {\n      return `${e}/tss/${routeIdentifier.networkIdentifier}`;\n    }\n    return `${e}/tss`;\n  });\n};\n","import { INodePub, TORUS_SAPPHIRE_NETWORK, TORUS_SAPPHIRE_NETWORK_TYPE } from \"@toruslabs/constants\";\n\nexport const SAPPHIRE_NODE_PUB_KEYS: Record<TORUS_SAPPHIRE_NETWORK_TYPE, INodePub[]> = {\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_MAINNET]: [\n    {\n      X: \"e0925898fee0e9e941fdca7ee88deec99939ae9407e923535c4d4a3a3ff8b052\",\n      Y: \"54b9fea924e3f3e40791f9987f4234ae4222412d65b74068032fa5d8b63375c1\",\n    },\n    {\n      X: \"9124cf1e280aab32ba50dffd2de81cecabc13d82d2c1fe9de82f3b3523f9b637\",\n      Y: \"fca939a1ceb42ce745c55b21ef094f543b457630cb63a94ef4f1afeee2b1f107\",\n    },\n    {\n      X: \"555f681a63d469cc6c3a58a97e29ebd277425f0e6159708e7c7bf05f18f89476\",\n      Y: \"606f2bcc0884fa5b64366fc3e8362e4939841b56acd60d5f4553cf36b891ac4e\",\n    },\n    {\n      X: \"2b5f58d8e340f1ab922e89b3a69a68930edfe51364644a456335e179bc130128\",\n      Y: \"4b4daa05939426e3cbe7d08f0e773d2bf36f64c00d04620ee6df2a7af4d2247\",\n    },\n    {\n      X: \"3ecbb6a68afe72cf34ec6c0a12b5cb78a0d2e83ba402983b6adbc5f36219861a\",\n      Y: \"dc1031c5cc8f0472bd521a62a64ebca9e163902c247bf05937daf4ae835091e4\",\n    },\n  ],\n  [TORUS_SAPPHIRE_NETWORK.SAPPHIRE_DEVNET]: [\n    {\n      X: \"f74389b0a4c8d10d2a687ae575f69b20f412d41ab7f1fe6b358aa14871327247\",\n      Y: \"54e3a73098ed9bced3ef8821736e9794f9264a1420c0c7ad15d2fa617ba35ef7\",\n    },\n    {\n      X: \"bc38813a6873e526087918507c78fc3a61624670ee851ecfb4f3bef55d027b5a\",\n      Y: \"ac4b21229f662a0aefdfdac21cf17c3261a392c74a8790db218b34e3e4c1d56a\",\n    },\n    {\n      X: \"b56541684ea5fa40c8337b7688d502f0e9e092098962ad344c34e94f06d293fb\",\n      Y: \"759a998cef79d389082f9a75061a29190eec0cac99b8c25ddcf6b58569dad55c\",\n    },\n    {\n      X: \"7bcb058d4c6ffc6ba4bfdfd93d141af35a66338a62c7c27cdad2ae3f8289b767\",\n      Y: \"336ab1935e41ed4719e162587f0ab55518db4207a1eb36cc72303f1b86689d2b\",\n    },\n    {\n      X: \"bf12a136ef94399ea098f926f04e26a4ec4ac70f69cce274e8893704c4951773\",\n      Y: \"bdd44828020f52ce510e026338216ada184a6867eb4e19fb4c2d495d4a7e15e4\",\n    },\n  ],\n};\n","import { INodeDetails, TORUS_LEGACY_NETWORK_TYPE, TORUS_SAPPHIRE_NETWORK_TYPE } from \"@toruslabs/constants\";\n\nimport { getRSSEndpoints, getSSSEndpoints, getTSSEndpoints } from \"./endpoints\";\nimport { SAPPHIRE_NODE_PUB_KEYS } from \"./pubKeys\";\n\nexport const getSapphireNodeDetails = (sapphireNetwork: TORUS_SAPPHIRE_NETWORK_TYPE, legacyNetwork?: TORUS_LEGACY_NETWORK_TYPE): INodeDetails => {\n  return {\n    currentEpoch: \"1\",\n\n    torusNodeEndpoints: getSSSEndpoints(sapphireNetwork, legacyNetwork),\n\n    torusNodeSSSEndpoints: getSSSEndpoints(sapphireNetwork, legacyNetwork),\n\n    torusNodeRSSEndpoints: getRSSEndpoints(sapphireNetwork, legacyNetwork),\n\n    torusNodeTSSEndpoints: getTSSEndpoints(sapphireNetwork, legacyNetwork),\n    torusIndexes: [1, 2, 3, 4, 5],\n\n    torusNodePub: SAPPHIRE_NODE_PUB_KEYS[sapphireNetwork],\n  };\n};\n","import {\n  INodeDetails,\n  LEGACY_NETWORKS_ROUTE_MAP,\n  TORUS_LEGACY_NETWORK,\n  TORUS_LEGACY_NETWORK_TYPE,\n  TORUS_NETWORK_TYPE,\n  TORUS_SAPPHIRE_NETWORK,\n  TORUS_SAPPHIRE_NETWORK_TYPE,\n} from \"@toruslabs/constants\";\n\nimport { getSapphireNodeDetails } from \"./sapphireNetworkConfig\";\n\nexport function fetchLocalConfig(network: TORUS_NETWORK_TYPE): INodeDetails | undefined {\n  if (Object.values(TORUS_SAPPHIRE_NETWORK).includes(network as TORUS_SAPPHIRE_NETWORK_TYPE)) {\n    return getSapphireNodeDetails(network as TORUS_SAPPHIRE_NETWORK_TYPE);\n  }\n\n  if (Object.values(TORUS_LEGACY_NETWORK).includes(network as TORUS_LEGACY_NETWORK_TYPE)) {\n    const legacyMap = LEGACY_NETWORKS_ROUTE_MAP[network as TORUS_LEGACY_NETWORK_TYPE];\n    if (legacyMap.migrationCompleted) return getSapphireNodeDetails(legacyMap.networkMigratedTo, network as TORUS_LEGACY_NETWORK_TYPE);\n  }\n\n  return undefined;\n}\n"],"names":["SAPPHIRE_NETWORK_URLS","TORUS_SAPPHIRE_NETWORK","SAPPHIRE_DEVNET","SAPPHIRE_MAINNET","getSSSEndpoints","sapphireNetwork","legacyNetwork","endpoints","length","Error","routeIdentifier","LEGACY_NETWORKS_ROUTE_MAP","map","e","networkIdentifier","getRSSEndpoints","getTSSEndpoints","SAPPHIRE_NODE_PUB_KEYS","X","Y","getSapphireNodeDetails","currentEpoch","torusNodeEndpoints","torusNodeSSSEndpoints","torusNodeRSSEndpoints","torusNodeTSSEndpoints","torusIndexes","torusNodePub","fetchLocalConfig","network","Object","values","includes","TORUS_LEGACY_NETWORK","legacyMap","migrationCompleted","networkMigratedTo","undefined"],"mappings":"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"}