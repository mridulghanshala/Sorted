{"version":3,"file":"baseProvider.cjs.js","mappings":"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","sources":["webpack://@web3auth/base-provider/webpack/bootstrap","webpack://@web3auth/base-provider/webpack/runtime/compat get default export","webpack://@web3auth/base-provider/webpack/runtime/define property getters","webpack://@web3auth/base-provider/webpack/runtime/hasOwnProperty shorthand","webpack://@web3auth/base-provider/webpack/runtime/make namespace object","webpack://@web3auth/base-provider/external commonjs2 \"@babel/runtime/helpers/objectSpread2\"","webpack://@web3auth/base-provider/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@web3auth/base-provider/external commonjs2 \"@metamask/rpc-errors\"","webpack://@web3auth/base-provider/external commonjs2 \"@toruslabs/base-controllers\"","webpack://@web3auth/base-provider/external commonjs2 \"@web3auth/base\"","webpack://@web3auth/base-provider/./src/baseProvider.ts","webpack://@web3auth/base-provider/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@web3auth/base-provider/./src/jrpcClient.ts","webpack://@web3auth/base-provider/./src/CommonJRPCProvider.ts","webpack://@web3auth/base-provider/./src/commonPrivateKeyProvider.ts","webpack://@web3auth/base-provider/external commonjs2 \"json-rpc-random-id\"","webpack://@web3auth/base-provider/./src/utils.ts","webpack://@web3auth/base-provider/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/objectSpread2\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@metamask/rpc-errors\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/base-controllers\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@web3auth/base\");","import { rpcErrors } from \"@metamask/rpc-errors\";\nimport { BaseConfig, BaseController, BaseState, createEventEmitterProxy } from \"@toruslabs/base-controllers\";\nimport { JRPCRequest, JRPCResponse, SendCallBack } from \"@toruslabs/openlogin-jrpc\";\nimport {\n  CustomChainConfig,\n  IBaseProvider,\n  Maybe,\n  RequestArguments,\n  SafeEventEmitterProvider,\n  WalletInitializationError,\n  WalletProviderError,\n} from \"@web3auth/base\";\n\nexport interface BaseProviderState extends BaseState {\n  chainId: string;\n}\n\nexport interface BaseProviderConfig extends BaseConfig {\n  chainConfig: Partial<CustomChainConfig>;\n  networks?: Record<string, CustomChainConfig>;\n  skipLookupNetwork?: boolean;\n}\n\nexport abstract class BaseProvider<C extends BaseProviderConfig, S extends BaseProviderState, P>\n  extends BaseController<C, S>\n  implements IBaseProvider<P>\n{\n  // should be Assigned in setupProvider\n  public _providerEngineProxy: SafeEventEmitterProvider | null = null;\n\n  constructor({ config, state }: { config: C; state?: S }) {\n    super({ config, state });\n    if (!config.chainConfig) throw WalletInitializationError.invalidProviderConfigError(\"Please provide chainConfig\");\n    if (!config.chainConfig.chainId) throw WalletInitializationError.invalidProviderConfigError(\"Please provide chainId inside chainConfig\");\n    if (!config.chainConfig.rpcTarget) throw WalletInitializationError.invalidProviderConfigError(\"Please provide rpcTarget inside chainConfig\");\n    this.defaultState = {\n      chainId: \"loading\",\n    } as S;\n    this.defaultConfig = {\n      chainConfig: config.chainConfig,\n      networks: { [config.chainConfig.chainId]: config.chainConfig },\n    } as C;\n    super.initialize();\n  }\n\n  get currentChainConfig(): Partial<CustomChainConfig> {\n    return this.config.chainConfig;\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  get chainId(): string {\n    return this.state.chainId;\n  }\n\n  set provider(_) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  async request<T, R>(args: RequestArguments<T>): Promise<Maybe<R>> {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw rpcErrors.invalidRequest({\n        message: WalletProviderError.invalidRequestArgs().message,\n        data: { ...(args || {}), cause: WalletProviderError.invalidRequestArgs().message },\n      });\n    }\n\n    const { method, params } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw rpcErrors.invalidRequest({\n        message: WalletProviderError.invalidRequestMethod().message,\n        data: { ...(args || {}), cause: WalletProviderError.invalidRequestMethod().message },\n      });\n    }\n\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw rpcErrors.invalidRequest({\n        message: WalletProviderError.invalidRequestParams().message,\n        data: { ...(args || {}), cause: WalletProviderError.invalidRequestParams().message },\n      });\n    }\n\n    return this.provider?.request(args);\n  }\n\n  sendAsync<T, U>(req: JRPCRequest<T>, callback: SendCallBack<JRPCResponse<U>>): void;\n  sendAsync<T, U>(req: JRPCRequest<T>): Promise<JRPCResponse<U>>;\n\n  sendAsync<T, U>(req: JRPCRequest<T>, callback?: SendCallBack<JRPCResponse<U>>): void | Promise<JRPCResponse<U>> {\n    if (callback) return this.send(req, callback);\n    return this.request(req);\n  }\n\n  send<T, U>(req: JRPCRequest<T>, callback: SendCallBack<JRPCResponse<U>>): void {\n    this.request(req)\n      .then((res) => callback(null, { result: res } as JRPCResponse<U>))\n      .catch((err) => callback(err, null));\n  }\n\n  public addChain(chainConfig: CustomChainConfig): void {\n    if (!chainConfig.chainId) throw rpcErrors.invalidParams(\"chainId is required\");\n    if (!chainConfig.rpcTarget) throw rpcErrors.invalidParams(\"chainId is required\");\n    this.configure({\n      networks: { ...this.config.networks, [chainConfig.chainId]: chainConfig },\n    } as C);\n  }\n\n  public getChainConfig(chainId: string): CustomChainConfig | null {\n    const chainConfig = this.config.networks?.[chainId];\n    if (!chainConfig) throw rpcErrors.invalidRequest(`Chain ${chainId} is not supported, please add chainConfig for it`);\n    return chainConfig;\n  }\n\n  public updateProviderEngineProxy(provider: SafeEventEmitterProvider): void {\n    if (this._providerEngineProxy) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this._providerEngineProxy as any).setTarget(provider);\n    } else {\n      this._providerEngineProxy = createEventEmitterProxy<SafeEventEmitterProvider>(provider);\n    }\n  }\n\n  protected getProviderEngineProxy(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  abstract setupProvider(provider: P): Promise<void>;\n\n  abstract switchChain(params: { chainId: string }): Promise<void>;\n\n  protected abstract lookupNetwork(provider?: P): Promise<string | void>;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/openlogin-jrpc\");","import { createFetchMiddleware } from \"@toruslabs/base-controllers\";\nimport {\n  Block,\n  JRPCEngineEndCallback,\n  JRPCEngineNextCallback,\n  JRPCMiddleware,\n  JRPCRequest,\n  JRPCResponse,\n  mergeMiddleware,\n} from \"@toruslabs/openlogin-jrpc\";\nimport type { CustomChainConfig } from \"@web3auth/base\";\n\nexport function createChainIdMiddleware(chainId: string): JRPCMiddleware<unknown, string> {\n  return (req: JRPCRequest<unknown>, res: JRPCResponse<string>, next: JRPCEngineNextCallback, end: JRPCEngineEndCallback) => {\n    if (req.method === \"chainId\") {\n      res.result = chainId;\n      return end();\n    }\n    return next();\n  };\n}\n\nexport function createProviderConfigMiddleware(providerConfig: CustomChainConfig): JRPCMiddleware<unknown, CustomChainConfig> {\n  return (req: JRPCRequest<unknown>, res: JRPCResponse<CustomChainConfig>, next: JRPCEngineNextCallback, end: JRPCEngineEndCallback) => {\n    if (req.method === \"provider_config\") {\n      res.result = providerConfig;\n      return end();\n    }\n    return next();\n  };\n}\n\nexport function createJsonRpcClient(providerConfig: CustomChainConfig): {\n  networkMiddleware: JRPCMiddleware<unknown, unknown>;\n  fetchMiddleware: JRPCMiddleware<string[], Block>;\n} {\n  const { chainId, rpcTarget } = providerConfig;\n  const fetchMiddleware = createFetchMiddleware({ rpcTarget });\n  const networkMiddleware = mergeMiddleware([\n    createChainIdMiddleware(chainId) as JRPCMiddleware<unknown, unknown>,\n    createProviderConfigMiddleware(providerConfig) as JRPCMiddleware<unknown, unknown>,\n    fetchMiddleware as JRPCMiddleware<unknown, unknown>,\n  ]);\n  return { networkMiddleware, fetchMiddleware };\n}\n","import { providerErrors } from \"@metamask/rpc-errors\";\nimport { createEventEmitterProxy } from \"@toruslabs/base-controllers\";\nimport { JRPCEngine, providerFromEngine } from \"@toruslabs/openlogin-jrpc\";\nimport { CustomChainConfig, SafeEventEmitterProvider } from \"@web3auth/base\";\n\nimport { BaseProvider, BaseProviderConfig, BaseProviderState } from \"./baseProvider\";\nimport { createJsonRpcClient } from \"./jrpcClient\";\n\nexport type CommonJRPCProviderConfig = BaseProviderConfig;\n\nexport type CommonJRPCProviderState = BaseProviderState;\n\nexport class CommonJRPCProvider extends BaseProvider<CommonJRPCProviderConfig, CommonJRPCProviderState, never> {\n  constructor({ config, state }: { config: CommonJRPCProviderConfig; state?: CommonJRPCProviderState }) {\n    super({ config, state });\n  }\n\n  public static getProviderInstance = async (params: { chainConfig: CustomChainConfig }): Promise<CommonJRPCProvider> => {\n    const providerFactory = new CommonJRPCProvider({ config: { chainConfig: params.chainConfig } });\n    await providerFactory.setupProvider();\n    return providerFactory;\n  };\n\n  public async setupProvider(): Promise<void> {\n    const { networkMiddleware } = createJsonRpcClient(this.config.chainConfig as CustomChainConfig);\n    const engine = new JRPCEngine();\n    engine.push(networkMiddleware);\n    const provider = providerFromEngine(engine);\n    this.updateProviderEngineProxy(provider);\n    const newChainId = this.config.chainConfig.chainId;\n    if (this.state.chainId !== newChainId) {\n      this.emit(\"chainChanged\", newChainId);\n      this.emit(\"connect\", { chainId: newChainId });\n    }\n    this.update({ chainId: this.config.chainConfig.chainId });\n  }\n\n  public async switchChain(params: { chainId: string }): Promise<void> {\n    if (!this._providerEngineProxy) throw providerErrors.custom({ message: \"Provider is not initialized\", code: 4902 });\n    const chainConfig = this.getChainConfig(params.chainId);\n    this.update({\n      chainId: \"loading\",\n    });\n    this.configure({ chainConfig });\n    await this.setupProvider();\n  }\n\n  public updateProviderEngineProxy(provider: SafeEventEmitterProvider) {\n    if (this._providerEngineProxy) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this._providerEngineProxy as any).setTarget(provider);\n    } else {\n      this._providerEngineProxy = createEventEmitterProxy<SafeEventEmitterProvider>(provider);\n    }\n  }\n\n  protected getProviderEngineProxy(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  protected lookupNetwork(): Promise<string | void> {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n","import { createEventEmitterProxy } from \"@toruslabs/base-controllers\";\nimport {\n  createAsyncMiddleware,\n  createScaffoldMiddleware,\n  JRPCEngine,\n  JRPCMiddleware,\n  JRPCRequest,\n  JRPCResponse,\n  providerFromEngine,\n} from \"@toruslabs/openlogin-jrpc\";\nimport { CHAIN_NAMESPACES, CustomChainConfig, IBaseProvider, SafeEventEmitterProvider } from \"@web3auth/base\";\n\nimport { BaseProvider, BaseProviderConfig, BaseProviderState } from \"./baseProvider\";\n\nexport interface CommonPrivKeyProviderConfig extends BaseProviderConfig {\n  chainConfig: Omit<CustomChainConfig, \"chainNamespace\">;\n}\n\nexport interface CommonPrivKeyProviderState extends BaseProviderState {\n  privateKey?: string;\n}\n\nexport class CommonPrivateKeyProvider extends BaseProvider<BaseProviderConfig, CommonPrivKeyProviderState, string> implements IBaseProvider<string> {\n  // should be Assigned in setupProvider\n  public _providerEngineProxy: SafeEventEmitterProvider | null = null;\n\n  constructor({ config, state }: { config: CommonPrivKeyProviderConfig; state?: CommonPrivKeyProviderState }) {\n    super({ config: { chainConfig: { ...config.chainConfig, chainNamespace: CHAIN_NAMESPACES.OTHER } }, state });\n  }\n\n  get provider(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  set provider(_) {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public static getProviderInstance = async (params: {\n    privKey: string;\n    chainConfig: Omit<CustomChainConfig, \"chainNamespace\">;\n  }): Promise<CommonPrivateKeyProvider> => {\n    const providerFactory = new CommonPrivateKeyProvider({ config: { chainConfig: params.chainConfig } });\n    await providerFactory.setupProvider(params.privKey);\n    return providerFactory;\n  };\n\n  addChain(_: CustomChainConfig): void {\n    throw new Error(\"Method not implemented.\");\n  }\n\n  public async setupProvider(privKey: string): Promise<void> {\n    const privKeyMiddleware = this.getPrivKeyMiddleware(privKey);\n    const engine = new JRPCEngine();\n    engine.push(privKeyMiddleware);\n    const provider = providerFromEngine(engine);\n    this.updateProviderEngineProxy(provider);\n  }\n\n  public updateProviderEngineProxy(provider: SafeEventEmitterProvider) {\n    if (this._providerEngineProxy) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (this._providerEngineProxy as any).setTarget(provider);\n    } else {\n      this._providerEngineProxy = createEventEmitterProxy<SafeEventEmitterProvider>(provider);\n    }\n  }\n\n  public async switchChain(_: { chainId: string }): Promise<void> {\n    return Promise.resolve();\n  }\n\n  protected getProviderEngineProxy(): SafeEventEmitterProvider | null {\n    return this._providerEngineProxy;\n  }\n\n  protected async lookupNetwork(): Promise<string> {\n    return Promise.resolve(\"\");\n  }\n\n  private getPrivKeyMiddleware(privKey: string): JRPCMiddleware<unknown, unknown> {\n    const middleware = {\n      getPrivatekey: async (): Promise<string> => {\n        return privKey;\n      },\n    };\n    return this.createPrivKeyMiddleware(middleware);\n  }\n\n  private createPrivKeyMiddleware({ getPrivatekey }: { getPrivatekey: () => Promise<string> }): JRPCMiddleware<unknown, unknown> {\n    async function getPrivatekeyHandler(_: JRPCRequest<{ privateKey: string }[]>, res: JRPCResponse<unknown>): Promise<void> {\n      res.result = await getPrivatekey();\n    }\n\n    return createScaffoldMiddleware({\n      private_key: createAsyncMiddleware(getPrivatekeyHandler) as JRPCMiddleware<unknown, unknown>,\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"json-rpc-random-id\");","import getCreateRandomId from \"json-rpc-random-id\";\nexport const createRandomId = getCreateRandomId();\n","export * from \"./baseProvider\";\nexport * from \"./CommonJRPCProvider\";\nexport * from \"./commonPrivateKeyProvider\";\nexport * from \"./utils\";\n"],"names":["rpcErrors","BaseController","createEventEmitterProxy","WalletInitializationError","WalletProviderError","BaseProvider","constructor","_ref","config","state","_defineProperty","chainConfig","invalidProviderConfigError","chainId","rpcTarget","defaultState","defaultConfig","networks","initialize","currentChainConfig","provider","_providerEngineProxy","_","Error","request","args","_this$provider","Array","isArray","invalidRequest","message","invalidRequestArgs","data","_objectSpread","cause","method","params","length","invalidRequestMethod","undefined","invalidRequestParams","sendAsync","req","callback","send","then","res","result","catch","err","addChain","invalidParams","configure","getChainConfig","_this$config$networks","updateProviderEngineProxy","setTarget","getProviderEngineProxy","createFetchMiddleware","mergeMiddleware","createChainIdMiddleware","next","end","createProviderConfigMiddleware","providerConfig","createJsonRpcClient","fetchMiddleware","networkMiddleware","providerErrors","JRPCEngine","providerFromEngine","CommonJRPCProvider","setupProvider","engine","push","newChainId","emit","update","switchChain","custom","code","lookupNetwork","_class","providerFactory","createAsyncMiddleware","createScaffoldMiddleware","CHAIN_NAMESPACES","CommonPrivateKeyProvider","chainNamespace","OTHER","privKey","privKeyMiddleware","getPrivKeyMiddleware","Promise","resolve","middleware","getPrivatekey","createPrivKeyMiddleware","_ref2","getPrivatekeyHandler","private_key","getCreateRandomId","createRandomId"],"sourceRoot":""}